datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  accessWeddingInvitation EnumUserAccessWeddingInvitation?
  createdAt               DateTime                         @default(now())
  email                   String?                          @unique
  firstName               String?
  id                      String                           @id @default(cuid())
  lastName                String?
  password                String
  payments                Payment[]
  phone                   String?
  roles                   Json
  status                  EnumUserStatus?
  updatedAt               DateTime                         @updatedAt
  username                String                           @unique
  weddingInvitations      WeddingInvitation[]
}

model WeddingInvitation {
  bride                     Json?
  createdAt                 DateTime                   @default(now())
  events                    Json?
  galleries                 Json?
  gifts                     Json?
  groom                     Json?
  id                        String                     @id @default(cuid())
  invites                   Json?
  moments                   Json?
  quotes                    Json?
  updatedAt                 DateTime                   @updatedAt
  userId                    User                       @relation(fields: [userIdId], references: [id])
  userIdId                  String
  video                     String?
  weddingInvitationComments WeddingInvitationComment[]
  weddingInvitationShares   WeddingInvitationShare[]
}

model WeddingInvitationShare {
  createdAt   DateTime           @default(now())
  id          String             @id @default(cuid())
  institution String?
  link        String?
  name        String?
  open        String?
  updatedAt   DateTime           @updatedAt
  view        Int?
  weddingId   WeddingInvitation? @relation(fields: [ID], references: [id])
  ID          String?
}

model WeddingInvitationComment {
  address     String?
  comment     String?
  createdAt   DateTime           @default(now())
  email       String?
  id          String             @id @default(cuid())
  institution String?
  link        String?
  moment      Json?
  name        String?
  phone       String?
  present     String?
  updatedAt   DateTime           @updatedAt
  weddingId   WeddingInvitation? @relation(fields: [weddingIdId], references: [id])
  weddingIdId String?
}

model Payment {
  accessTo  String?
  createdAt DateTime           @default(now())
  evidence  String?
  id        String             @id @default(cuid())
  noRef     String?
  status    EnumPaymentStatus?
  updatedAt DateTime           @updatedAt
  userId    User?              @relation(fields: [userIdId], references: [id])
  userIdId  String?
}

enum EnumUserAccessWeddingInvitation {
  Yes
  No
}

enum EnumUserStatus {
  Register
  Active
  Nonactive
}

enum EnumPaymentStatus {
  Success
  Pending
  Failed
}
